<div class="box-content">
  <div class="btn-group" style="float: right">
    <a href="#create_user" class="btn" data-toggle="modal"><i class="icon-envelope"></i>&nbsp; Invite User</a>
    <%= link_to new_user_path, :class => 'btn ajax-modal'  do %><i class="icon-plus"></i>&nbsp; Add User<%end%>
  </div>
  <br/>
  <br/>
  <br/>
  <div class="panel no-top-bot-border" >
    <div class="title">
      Search Users
    </div>
    <div style="padding: 10px">
      <table width="100%">
        <tr>
          <td>
            Name: &nbsp; <input type="text" style="width: 64%"/> 
          </td>
          <td>
            Type: <select style="width: 70%">
              <option>All</option>
              <option>Story</option>
              <option>Task</option>
              <option>Defect</option>
            </select>
          </td>
          <td>
            Status: &nbsp;<select style="width: 70%">
              <option>All</option>
              <option>In Progress</option>
              <option>Done</option>
              <option>Resolved</option>
            </select>
          </td>
          <td>
            Rows: &nbsp; <select id="rows" style="width: 60%">
              <option>2</option>
              <option>5</option>
              <option>10</option>
            </select> 
          </td>
        </tr>
      </table>
    </div>         
    <div id="users_result" class="panel no-side-border" >
    </div>
  </div>
</div>
<%= stylesheet_link_tag 'simplePagination', :media => 'all' %>
<%= javascript_include_tag 'jquery.simplePagination' %>

<script>
  function search(pageNumber) {
    $("#loading").show();
    var rows = $("#rows").val();
    $.ajax({
      url: "<%= users_path %>",
      data: { 
        partial: true,
        rows: rows,
        offset: pageNumber - 1,
      },
      success: function(data) {
        $("#users_result").html(data); 
      },
      complete: function(data) {
        $("#loading").hide();
      }
    }); 
  }

  $(document).ready(function() {
    search(1); 
    var ids = ["#rows"];
    for(var i = 0; i < ids.length; ++i) {
      $(ids[i]).change(function() {
        search(1);
      })
    }
  });
</script>

