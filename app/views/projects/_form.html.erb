<div>
  <%= form_for @project, :remote => true do |f| %>
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" >&times;</button>
      <h3><%= @label %></h3>
    </div>
    <div class="modal-body">
      <table align="center" width="80%"> 
        <tr>
          <td>Project Name: <span class="required">*</span></td>
          <td><%= f.text_field :name, :style => 'width: 100%' %> </td>
        </tr>
        <tr>
          <td>URL: </td>
          <td><%= f.text_field :url, :style => 'width: 100%' %></td>
        </tr>
        <tr>
          <td>Description:</td>
          <td><%= f.text_area :description , :style => 'width: 100%', :rows => '5' %></textarea></td>
        </try>
      </table>
    </div>
    <div class="modal-footer">
      <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Close</a>
      <%= f.submit 'Save', :class => 'btn btn-primary', :id => :submit %>
      <%= image_tag 'spinner_small.gif', :style => 'display:none', :id => 'spinner' %> 
    </div>
  <% end %>
</div>

<script>
  $('#submit').click(function() {
    $('#submit').hide();
    $('#spinner').show();
    $.ajax({
      type: 'POST',
      data: $("[class$='project']").serialize(),
      url: '<%= projects_path %>',
      success: function(data) {
        if($.type(data) === 'object') {
          for(var key in data) {
            var e = $('#project_' + key);
            e.addClass('required_field'); 
            e.focus();
          }
        } 
      },
      complete: function(data) {
        $('#submit').show();
        $('#spinner').hide();
      }
    });
  });
</script>
